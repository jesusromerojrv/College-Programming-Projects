webpackJsonp([1],{"9M+g":function(e,t){},NHnr:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});n("qb6w"),n("9M+g");var r=n("Tqaz"),a=n("7+uW"),i=n("3EgV"),o=n.n(i),s=n("nUxp"),l=n.n(s),c=n("Xxa5"),u=n.n(c),d=n("exGp"),p=n.n(d),v=n("mtWM"),f=n.n(v),m=(n("SyL9"),new a.default),_={data:function(){return{drawer:null,current_user:null}},props:{source:String},mounted:function(){this.obtenerUsuario(),this.escucharEventos()},methods:{escucharEventos:function(){var e=this;m.$on("refreshUser",function(){e.obtenerUsuario()})},obtenerUsuario:function(){var e=this;return p()(u.a.mark(function t(){return u.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.abrupt("return",f()({method:"get",url:"/api/current_user"}).then(function(t){e.current_user=t.data.current_user}).catch(function(){}));case 1:case"end":return t.stop()}},t,e)}))()},logout:function(){var e=this;return f()({method:"get",url:"/api/logout"}).then(function(){m.$emit("refreshUser"),e.$router.push({name:"Inicio"})}).catch(function(){})}}},h={render:function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("v--app",{attrs:{id:"inspire"}},[n("v-navigation-drawer",{attrs:{fixed:"",app:""},model:{value:e.drawer,callback:function(t){e.drawer=t},expression:"drawer"}},[n("v-list",{attrs:{dense:""}},[n("router-link",{staticClass:"side_bar_link",attrs:{to:{name:"Inicio"}}},[n("v-list-item",[n("v-list-item-action",[n("v-icon",{attrs:{color:"#718355"}},[e._v("\n              home\n            ")])],1),e._v(" "),n("v-list-item-content",[e._v("Inicio")])],1)],1),e._v(" "),n("router-link",{staticClass:"side_bar_link",attrs:{to:{name:"Contacto"}}},[n("v-list-item",[n("v-list-item-action",[n("v-icon",{attrs:{color:"#718355"}},[e._v("\n              contact_mail\n            ")])],1),e._v(" "),n("v-list-item-content",[e._v("Contacto")])],1)],1)],1)],1),e._v(" "),n("v-app-bar",{attrs:{color:"#718355",dark:"",fixed:"",app:""}},[n("v-app-bar-nav-icon",{on:{click:function(t){t.stopPropagation(),e.drawer=!e.drawer}}}),e._v(" "),n("v-toolbar-title",[e._v("Inicio")]),e._v(" "),n("v-spacer"),e._v(" "),n("v-app-bar-items",{staticClass:"hidden-sm-and-down"},[e.current_user?n("v-btn",{attrs:{flat:"",id:"link_agregar_pelicula",to:{name:"AgregarPelicula"},color:"#97A97C"}},[e._v("\n        Agregar Pelicula\n      ")]):e._e(),e._v(" "),e.current_user?n("v-btn",{attrs:{id:"email_usuario",flat:""}},[e._v("\n        "+e._s(e.current_user.email)+"\n      ")]):e._e(),e._v(" "),e.current_user?e._e():n("v-btn",{attrs:{flat:"",to:{name:"Registro"},id:"boton_registro"}},[e._v("\n        Registro\n      ")]),e._v(" "),e.current_user?e._e():n("v-btn",{attrs:{flat:"",to:{name:"Login"},id:"boton_login"}},[e._v("\n        Login\n      ")]),e._v(" "),e.current_user?n("v-btn",{attrs:{flat:"",id:"boton_logout"},on:{click:e.logout}},[e._v("\n        Salir\n      ")]):e._e()],1)],1),e._v(" "),n("v-content",[n("v-container",{attrs:{fluid:""}},[n("div",{attrs:{id:"app"}},[n("router-view")],1)])],1),e._v(" "),n("v-footer",{attrs:{color:"#E9F5DB",app:""}},[n("span",{staticClass:"white--text"},[e._v("© 2022")])])],1)},staticRenderFns:[]},b=n("VU/8")(_,h,!1,null,null,null).exports,g=n("/ocq"),w={nombre:"Peliculas",data:function(){return{peliculas:[]}},mounted:function(){this.obtenerPeliculas()},methods:{obtenerPeliculas:function(){var e=this;return p()(u.a.mark(function t(){var n;return u.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return n=window.localStorage.getItem("auth"),t.abrupt("return",f()({method:"get",url:"/peliculas",headers:{Authorization:"JWT "+n,"Content-Type":"application/json"}}).then(function(t){e.peliculas=t.data.peliculas,e.current_user=t.data.current_user}).catch(function(){}));case 2:case"end":return t.stop()}},t,e)}))()}}},x={render:function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("v-layout",{attrs:{row:"",wrap:""}},e._l(e.peliculas,function(t){return n("v-flex",{key:t._id,attrs:{xs4:""}},[n("v-card",[n("v-card-title",{attrs:{"primary-title":""}},[n("div",[n("div",{staticClass:"headline"},[n("v-btn",{attrs:{flat:"",to:"/peliculas/"+t._id}},[e._v("\n            "+e._s(t.nombre)+"\n            ")])],1),e._v(" "),n("span",{staticClass:"grey-text"},[e._v(e._s(t.anho_publicacion)+" ·\n            "+e._s(t.genero))])])]),e._v(" "),n("v-card-text",[e._v("\n        "+e._s(t.descripcion)+"\n      ")])],1)],1)}),1)},staticRenderFns:[]},k=n("VU/8")(w,x,!1,null,null,null).exports,E={render:function(){var e=this.$createElement;return(this._self._c||e)("div",[this._v("\n  Esto es el contacto\n")])},staticRenderFns:[]},$=n("VU/8")(null,E,!1,null,null,null).exports,C={data:function(){return{valid:!0,nombre:"",descripcion:"",genero:"",anho_publicacion:"",anhos:["2022","2021","2020","2019","2018","2017","2016","2015"],reglasNombre:[function(e){return!!e||"El nombre de la película es requerido"}],reglasGenero:[function(e){return!!e||"Se requiere el género de la pelicula"},function(e){return e&&e.length<=80||"El género debe ser de 80 caracteres o menos"}],reglasPublicacion:[function(e){return!!e||"Se requiere el año de publicación"}],select:null}},methods:{enviar:function(){var e=this;return this.$refs.form.validate()?f()({method:"post",data:{nombre:this.nombre,descripcion:this.descripcion,anho_publicacion:this.anho_publicacion,genero:this.genero},url:"/peliculas/",headers:{"Content-Type":"application/json"}}).then(function(){e.$swal("¡Excelente!","¡Pelicula agregada satisfactoriamente!","success"),e.$router.push({name:"Inicio"}),e.$refs.form.reset()}).catch(function(){e.$swal("¡Error!","No se pudo agregar la película","error")}):null},limpiar:function(){this.$refs.form.reset()}}},y={render:function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("v-form",{ref:"form",attrs:{"lazy-validation":""},model:{value:e.valid,callback:function(t){e.valid=t},expression:"valid"}},[n("v-text-field",{attrs:{label:"Nombre:",required:"",rules:e.reglasNombre},model:{value:e.nombre,callback:function(t){e.nombre=t},expression:"nombre"}}),e._v(" "),n("v-text-field",{attrs:{name:"input-7-1",label:"Descripción:","multi-line":""},model:{value:e.descripcion,callback:function(t){e.descripcion=t},expression:"descripcion"}}),e._v(" "),n("v-select",{attrs:{label:"Año de publicación:",required:"",rules:e.reglasPublicacion,items:e.anhos},model:{value:e.anho_publicacion,callback:function(t){e.anho_publicacion=t},expression:"anho_publicacion"}}),e._v(" "),n("v-text-field",{attrs:{label:"Género:",required:"",rules:e.reglasGenero},model:{value:e.genero,callback:function(t){e.genero=t},expression:"genero"}}),e._v(" "),n("v-btn",{attrs:{disabled:!e.valid},on:{click:e.enviar}},[e._v("Enviar")]),e._v(" "),n("v-btn",{on:{click:e.limpiar}},[e._v("Limpiar")])],1)},staticRenderFns:[]},S=n("VU/8")(C,y,!1,null,null,null).exports,q=n("IE+l"),P=n.n(q),U=document.createElement("div"),F={nota:0},I=(new(a.default.extend({data:function(){return{calificacion:0}},watch:{calificacion:function(e){F.nota=e}},template:'\n   <div class="rating">\n    ¿Cuál fue su experiencia viendo esa pelicula?\n    <star-rating v-model="calificacion" :show-rating="false"></star-rating>\n   </div>',components:{"star-rating":P.a}}))).$mount(U),R={nombre:"Pelicula",data:function(){return{pelicula:[]}},mounted:function(){this.obtenerPelicula()},methods:{calificar:function(){var e=this;return p()(u.a.mark(function t(){return u.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:e.$swal({content:I.$el,buttons:{confirm:{value:0}}}).then(function(){var t=e.$route.params.id;return f()({method:"post",data:{calificacion:F.nota},url:"http://localhost:8081/peliculas/calif/"+t,headers:{"Content-Type":"application/json"}}).then(function(){e.$swal("Gracias por calificar! "+F.nota,"success")}).catch(function(t){var n=t.response.data.message;e.$swal("¡Error!",""+n,"error")})});case 1:case"end":return t.stop()}},t,e)}))()},obtenerPelicula:function(){var e=this;return p()(u.a.mark(function t(){return u.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.abrupt("return",f()({method:"get",url:"http://localhost:8081/api/peliculas/"+e.$route.params.id}).then(function(t){e.pelicula=t.data}).catch(function(){}));case 1:case"end":return t.stop()}},t,e)}))()}}},A={render:function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("v-layout",{attrs:{row:"",wrap:""}},[n("v-flex",{attrs:{xs4:""}},[n("v-card",[n("v-card-title",{attrs:{"primery-title":""}},[n("div",[n("div",{staticClass:"headline"},[e._v(e._s(e.pelicula.nombre))]),e._v(" "),n("span",{staticClass:"grey-text"},[e._v("\n                        "+e._s(e.pelicula.anho_publicacion)+" · "+e._s(e.pelicula.genero)+"\n                    ")])])]),e._v(" "),n("h6",{staticClass:"card-title",on:{click:e.calificar}},[e._v("\n              Calificar esta pelicula\n            ")]),e._v(" "),n("v-card-text",[e._v("\n                "+e._s(e.pelicula.descripcion)+"\n            ")])],1)],1)],1)},staticRenderFns:[]},L=n("VU/8")(R,A,!1,null,null,null).exports,T={data:function(){return{valid:!0,nombre:"",email:"",password:"",confirmar_password:"",reglasEmail:[function(e){return!!e||"Se requiere el email"},function(e){return/\S+@\S+\.\S+/.test(e)||"Email debe ser valido"}]}},methods:{enviar:function(){var e=this;return p()(u.a.mark(function t(){return u.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:if(!e.$refs.form.validate()){t.next=2;break}return t.abrupt("return",f()({method:"post",data:{nombre:e.nombre,email:e.email,password:e.password},url:"/usuarios/registro",headers:{"Content-Type":"application/json"}}).then(function(){e.$swal("¡Excelente!","Ha sido registrado satisfactoriamente","Success"),e.$router.push({name:"Login"})}).catch(function(t){var n=t.response.data.message;e.$swal("Error",""+n,"error")}));case 2:return t.abrupt("return",!0);case 3:case"end":return t.stop()}},t,e)}))()},limpiar:function(){this.$refs.form.reset()}}},V={render:function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("v-form",{ref:"form",attrs:{"lazy-validation":""},model:{value:e.valid,callback:function(t){e.valid=t},expression:"valid"}},[n("v-text-field",{attrs:{label:"Nombre:",required:""},model:{value:e.nombre,callback:function(t){e.nombre=t},expression:"nombre"}}),e._v(" "),n("v-text-field",{attrs:{label:"Email:",rules:e.reglasEmail,required:""},model:{value:e.email,callback:function(t){e.email=t},expression:"email"}}),e._v(" "),n("v-text-field",{attrs:{label:"Contraseña:",required:""},model:{value:e.password,callback:function(t){e.password=t},expression:"password"}}),e._v(" "),n("v-text-field",{attrs:{name:"campo-7-1",label:"Confirmar Contraseña:"},model:{value:e.confirmar_password,callback:function(t){e.confirmar_password=t},expression:"confirmar_password"}}),e._v(" "),n("v-btn",{attrs:{disabled:!e.valid},on:{click:e.enviar}},[e._v("\n        Enviar\n    ")]),e._v(" "),n("v-btn",{on:{click:e.limpiar}},[e._v("Limpiar")])],1)},staticRenderFns:[]},N=n("VU/8")(T,V,!1,null,null,null).exports,j={data:function(){return{valid:!0,email:"",password:"",reglasEmail:[function(e){return!!e||"Se requiere el email"},function(e){return/\S+@\S+\.\S/.test(e)||"El email debe ser valido"}]}},methods:{enviar:function(){var e=this;return p()(u.a.mark(function t(){return u.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.abrupt("return",f()({method:"post",data:{email:e.email,password:e.password},url:"/usuarios/login",headers:{"Content-Type":"application/json"}}).then(function(t){window.localStorage.setItem("auth",t.data.token),e.$swal("Felicidades!!","Está listo para iniciar!","Success"),m.$emit("refreshUser"),e.$router.push({name:"Inicio"})}).catch(function(t){var n=t.response.data.message;e.$swal("Error",""+n,"error"),e.$router.push({name:"Login"})}));case 1:case"end":return t.stop()}},t,e)}))()},limpiar:function(){this.$refs.form.reset()}}},z={render:function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",[e._m(0),e._v(" "),n("v-form",{ref:"form",attrs:{"lazy-validation":""},model:{value:e.valid,callback:function(t){e.valid=t},expression:"valid"}},[n("v-text-field",{attrs:{label:"Email:",rules:e.reglasEmail,required:""},model:{value:e.email,callback:function(t){e.email=t},expression:"email"}}),e._v(" "),n("v-text-field",{attrs:{label:"Contraseña:",required:""},model:{value:e.password,callback:function(t){e.password=t},expression:"password"}}),e._v(" "),n("v-btn",{attrs:{disabled:!e.valid},on:{click:e.enviar}},[e._v("Enviar")])],1)],1)},staticRenderFns:[function(){var e=this.$createElement,t=this._self._c||e;return t("div",{staticClass:"login"},[t("a",{staticClass:"btn facebook",attrs:{href:"/login/facebook"}},[this._v("Acceder con Facebook")])])}]},G=n("VU/8")(j,z,!1,null,null,null).exports;a.default.use(g.a);var M=new g.a({mode:"history",routes:[{path:"/",name:"Inicio",component:k},{path:"/contacto",name:"Contacto",component:$},{path:"/peliculas/agregar",name:"AgregarPelicula",component:S},{path:"/peliculas/:id",name:"Pelicula",component:L},{path:"/usuarios/registro",name:"Registro",component:N},{path:"/usuarios/login",name:"Login",component:G}]});a.default.use(r.a),a.default.use(o.a),a.default.use(l.a),a.default.config.productionTip=!1,new a.default({vuetify:new o.a,el:"#app",router:M,components:{App:b},template:"<App/>",render:function(e){return e(b)}})},SyL9:function(e,t){},qb6w:function(e,t){}},["NHnr"]);
//# sourceMappingURL=app.345d1cdf393361a6a1f0.js.map